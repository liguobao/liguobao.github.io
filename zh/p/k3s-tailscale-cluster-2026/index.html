<!doctype html><html lang=zh dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="åŸºäº Tailscale è‡ªå»ºæ§åˆ¶é¢ + K3s çš„è·¨äº‘è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆï¼Œå®æˆ˜ 8 èŠ‚ç‚¹ HA é›†ç¾¤æ­å»ºã€‚"><title>2206å¹´æœ€ä½³è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆï¼šTailscale + k3s</title><link rel=canonical href=https://liguobao.github.io/zh/p/k3s-tailscale-cluster-2026/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="2206å¹´æœ€ä½³è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆï¼šTailscale + k3s"><meta property='og:description' content="åŸºäº Tailscale è‡ªå»ºæ§åˆ¶é¢ + K3s çš„è·¨äº‘è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆï¼Œå®æˆ˜ 8 èŠ‚ç‚¹ HA é›†ç¾¤æ­å»ºã€‚"><meta property='og:url' content='https://liguobao.github.io/zh/p/k3s-tailscale-cluster-2026/'><meta property='og:site_name' content='äººç”Ÿåˆ é™¤æŒ‡å—'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='k3s'><meta property='article:tag' content='tailscale'><meta property='article:tag' content='kubernetes'><meta property='article:tag' content='2026'><meta property='article:published_time' content='2026-02-11T08:00:00+00:00'><meta property='article:modified_time' content='2026-02-11T08:00:00+00:00'><meta property='og:image' content='https://liguobao.github.io/zh/p/k3s-tailscale-cluster-2026/logo.png'><meta name=twitter:title content="2206å¹´æœ€ä½³è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆï¼šTailscale + k3s"><meta name=twitter:description content="åŸºäº Tailscale è‡ªå»ºæ§åˆ¶é¢ + K3s çš„è·¨äº‘è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆï¼Œå®æˆ˜ 8 èŠ‚ç‚¹ HA é›†ç¾¤æ­å»ºã€‚"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://liguobao.github.io/zh/p/k3s-tailscale-cluster-2026/logo.png'><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/zh/><img src=/img/zhihu-lgb_hu_2ad0a9defe137384.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/zh>äººç”Ÿåˆ é™¤æŒ‡å—</a></h1><h2 class=site-description>liguobao</h2></div></header><ol class=menu-social><li><a href=https://github.com/liguobao target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://x.com/Liguobao2049 target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li><li><a href=https://www.zhihu.com/people/codelover target=_blank title=çŸ¥ä¹ rel=me><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/zh/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/zh/liguobao-resume/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>About</span></a></li><li><a href=/zh/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/zh/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://liguobao.github.io/zh/ selected>ç®€ä½“ä¸­æ–‡</option><option value=https://liguobao.github.io/>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#æ•´ä½“æ¶æ„>æ•´ä½“æ¶æ„</a></li><li><a href=#ä¸€å…ˆæ-tailscaleäº‘ç«¯å†…ç½‘é›†ç¾¤>ä¸€ã€å…ˆæ Tailscaleï¼šäº‘ç«¯å†…ç½‘é›†ç¾¤</a><ol><li><a href=#ä¸ºä»€ä¹ˆä¸ç”¨-wireguard-æ‰‹åŠ¨ç»„ç½‘äº†>ä¸ºä»€ä¹ˆä¸ç”¨ WireGuard æ‰‹åŠ¨ç»„ç½‘äº†ï¼Ÿ</a></li><li><a href=#ä¸ºä»€ä¹ˆè‡ªå»º-headscale>ä¸ºä»€ä¹ˆè‡ªå»º Headscaleï¼Ÿ</a></li><li><a href=#headscale-éƒ¨ç½²>Headscale éƒ¨ç½²</a></li><li><a href=#èŠ‚ç‚¹å…¥ç½‘>èŠ‚ç‚¹å…¥ç½‘</a></li></ol></li><li><a href=#äºŒk3s-é›†ç¾¤æ­å»ºåŸºäº-tailscale-ç½‘ç»œ>äºŒã€K3s é›†ç¾¤æ­å»ºï¼šåŸºäº Tailscale ç½‘ç»œ</a><ol><li><a href=#æ ¸å¿ƒåŸåˆ™>æ ¸å¿ƒåŸåˆ™</a></li><li><a href=#å®‰è£…-master>å®‰è£… Master</a></li><li><a href=#å®‰è£…-edge-èŠ‚ç‚¹>å®‰è£… Edge èŠ‚ç‚¹</a></li><li><a href=#å›½å†…-docker-é•œåƒæ‹‰å–é—®é¢˜>å›½å†… Docker é•œåƒæ‹‰å–é—®é¢˜</a></li><li><a href=#å…³äºç½‘å…³èŠ‚ç‚¹>å…³äºç½‘å…³èŠ‚ç‚¹</a></li></ol></li><li><a href=#ä¸‰è¸©å‘å®å½•>ä¸‰ã€è¸©å‘å®å½•</a><ol><li><a href=#å‘-1flannel-ç”¨é”™ç½‘å¡è¡€æ³ªæ•™è®­>å‘ 1ï¼šFlannel ç”¨é”™ç½‘å¡ï¼ˆè¡€æ³ªæ•™è®­ï¼‰</a></li><li><a href=#å‘-2tailscale-è¿æ¥ä¸ç¨³å®š>å‘ 2ï¼šTailscale è¿æ¥ä¸ç¨³å®š</a></li><li><a href=#å‘-3ä½é…-master-åˆ«è·‘ä¸šåŠ¡-pod>å‘ 3ï¼šä½é… Master åˆ«è·‘ä¸šåŠ¡ Pod</a></li></ol></li><li><a href=#å››æ•…éšœæ’æŸ¥é€ŸæŸ¥>å››ã€æ•…éšœæ’æŸ¥é€ŸæŸ¥</a></li><li><a href=#äº”æ€»ç»“>äº”ã€æ€»ç»“</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/zh/p/k3s-tailscale-cluster-2026/><img src=/zh/p/k3s-tailscale-cluster-2026/logo_hu_5d6e6e4068c405d9.png srcset="/zh/p/k3s-tailscale-cluster-2026/logo_hu_5d6e6e4068c405d9.png 800w, /zh/p/k3s-tailscale-cluster-2026/logo_hu_42407341a6dd794.png 1600w" width=800 height=179 loading=lazy alt="Featured image of post 2206å¹´æœ€ä½³è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆï¼šTailscale + k3s"></a></div><div class=article-details><header class=article-category><a href=/zh/categories/linux/ style=background-color:#2a9d8f;color:#fff>Linux</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/zh/p/k3s-tailscale-cluster-2026/>2206å¹´æœ€ä½³è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆï¼šTailscale + k3s</a></h2><h3 class=article-subtitle>åŸºäº Tailscale è‡ªå»ºæ§åˆ¶é¢ + K3s çš„è·¨äº‘è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆï¼Œå®æˆ˜ 8 èŠ‚ç‚¹ HA é›†ç¾¤æ­å»ºã€‚</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2æœˆ 11, 2026</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 minute read</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://liguobao.github.io/p/k3s-tailscale-cluster-2026/ class=link>English</a></div></footer></div></header><section class=article-content><blockquote><p>PSï¼šé©¬ä¸Šæ”¾å‡äº†ï¼Œå†æŠ˜è…¾ä¸€ä¸‹ï¼ï¼ï¼</p></blockquote><p>æ‰‹åŠ¨ç‹—å¤´~</p><p>ã€ç¼–ç¨‹æŠ€æœ¯ä¸“åŒºåŠé€€æç¤ºã€‘</p><p>ä¸Šä¸€ç¯‡ k3s æ–‡ç« å·²ç»æ˜¯ 2025 å¹´äº†ï¼Œå½“æ—¶ç”¨çš„æ˜¯ WireGuard åšè·¨äº‘ç»„ç½‘ã€‚</p><p>ä¸€å¹´è¿‡å»äº†ï¼ŒWireGuard é…ç½®ææ¥æå»è¿˜æ˜¯å¤ªç´¯äº†</p><p>â€”â€”æ¯åŠ ä¸€å°æœºå™¨éƒ½å¾—æ‰‹åŠ¨æ”¹é…ç½®ã€äº’åŠ  Peerã€è°ƒè·¯ç”±â€¦â€¦</p><p>äºæ˜¯ä»Šå¹´å†³å®šæŠŠåº•å±‚ç½‘ç»œå…¨æ¢æˆ Tailscaleã€‚</p><p>æ›´å…·ä½“ä¸€ç‚¹â€”â€”è‡ªå»º Headscale æ§åˆ¶é¢ï¼Œä¸ä¾èµ–å®˜æ–¹ SaaSã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæ•´ä¸ªå†…ç½‘æƒ³åŠ å¤šå°‘èŠ‚ç‚¹å°±åŠ å¤šå°‘èŠ‚ç‚¹ï¼Œ</p><p>ä¸€è¡Œå‘½ä»¤å…¥ç½‘ï¼Œä¸ç”¨å†æ‰‹åŠ¨ç®¡ WireGuard Peer é…ç½®äº†ã€‚</p><p>åŒæ—¶ï¼Œk3s é›†ç¾¤ä» 2 èŠ‚ç‚¹å¯’é…¸ç‰ˆï¼Œ</p><p>å‡çº§åˆ°äº† <strong>4 Master + 4 Edge çš„ 8 èŠ‚ç‚¹ HA é›†ç¾¤</strong>ã€‚</p><p>éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ã€‚</p><p>ç›´æ¥å¹²ã€‚</p><h2 id=æ•´ä½“æ¶æ„>æ•´ä½“æ¶æ„</h2><p>å…ˆæ”¾ä¸€å¼ æ¶æ„å›¾ï¼Œå…¨å±€æ¦‚è§ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>                    äº’è”ç½‘
</span></span><span class=line><span class=cl>                      â”‚
</span></span><span class=line><span class=cl>        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span class=line><span class=cl>        â”‚             â”‚             â”‚
</span></span><span class=line><span class=cl>    [è…¾è®¯äº‘]       [Rainyun]      [æœ¬åœ°]
</span></span><span class=line><span class=cl>    (å›½å†…å¤šå°)    (æµ·å¤–æ–°åŠ å¡)   (å®¶åº­/åŠå…¬)
</span></span><span class=line><span class=cl>        â”‚             â”‚             â”‚
</span></span><span class=line><span class=cl>        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span class=line><span class=cl>                      â”‚
</span></span><span class=line><span class=cl>           Tailscale VPN (100.64.0.0/10)
</span></span><span class=line><span class=cl>          Headscale è‡ªå»ºæ§åˆ¶é¢ (ts.example.com)
</span></span><span class=line><span class=cl>          Authentik OIDC ç™»å½• (auth.example.com)
</span></span><span class=line><span class=cl>                      â”‚
</span></span><span class=line><span class=cl>        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span class=line><span class=cl>        â”‚          â”‚          â”‚          â”‚
</span></span><span class=line><span class=cl>    [control1] [control2] [control3] [control4]
</span></span><span class=line><span class=cl>    vm-0-8     vm-16-12   vm-28-17   vm-0-15
</span></span><span class=line><span class=cl>   100.64.0.6 100.64.0.5 100.64.0.7 100.64.0.10
</span></span><span class=line><span class=cl>    (Primary)  (Member)   (Member)  (TSæ§åˆ¶é¢)
</span></span><span class=line><span class=cl>        â”‚          â”‚          â”‚          â”‚
</span></span><span class=line><span class=cl>        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span class=line><span class=cl>                      â”‚
</span></span><span class=line><span class=cl>        K3S HA é›†ç¾¤ (Flannel VXLAN over Tailscale)
</span></span><span class=line><span class=cl>        Pod: 10.42.0.0/16  |  Service: 10.43.0.0/16
</span></span><span class=line><span class=cl>                      â”‚
</span></span><span class=line><span class=cl>        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span class=line><span class=cl>        â”‚         â”‚         â”‚         â”‚
</span></span><span class=line><span class=cl>     [haru]  [lgb-amd]  [rainyun]  [hc1]
</span></span><span class=line><span class=cl>      å›½å†…      æœ¬åœ°      æµ·å¤–      å›½å†…
</span></span><span class=line><span class=cl>    Ready âœ…  Ready âœ…  Ready âœ…  Ready âœ…
</span></span></code></pre></td></tr></table></div></div><p>å½“å‰é›†ç¾¤å®é™…çŠ¶æ€ï¼š</p><div class=table-wrapper><table><thead><tr><th>èŠ‚ç‚¹åç§°</th><th>è§’è‰²</th><th>Tailscale IP</th><th>çŠ¶æ€</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>vm-0-8-ubuntu-new</td><td>Master</td><td>100.64.0.6</td><td>Ready âœ…</td><td>åˆå§‹ Master, &ndash;cluster-init</td></tr><tr><td>vm-16-12-ubuntu</td><td>Master</td><td>100.64.0.5</td><td>Ready âœ…</td><td>HA Master</td></tr><tr><td>vm-28-17-ubuntu</td><td>Master</td><td>100.64.0.7</td><td>Ready âœ…</td><td>HA Master</td></tr><tr><td>vm-0-15-ubuntu</td><td>Master</td><td>100.64.0.10</td><td>Ready âœ…</td><td>Headscale æ§åˆ¶é¢èŠ‚ç‚¹, NoSchedule</td></tr><tr><td>haru</td><td>Edge</td><td>100.64.0.3</td><td>Ready âœ…</td><td>å›½å†…èŠ‚ç‚¹</td></tr><tr><td>lgb-amd-3700</td><td>Edge</td><td>100.64.0.4</td><td>Ready âœ…</td><td>æœ¬åœ° AMD ä¸»æœº, 16GB</td></tr><tr><td>rainyun-ssh7pavp</td><td>Edge</td><td>100.64.0.12</td><td>Ready âœ…</td><td>æµ·å¤–æ–°åŠ å¡èŠ‚ç‚¹</td></tr><tr><td>hc1</td><td>Edge</td><td>100.64.0.9</td><td>Ready âœ…</td><td>å›½å†…èŠ‚ç‚¹</td></tr></tbody></table></div><p>8 ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œè·‘ç€åå‡ ä¸ªæœåŠ¡ï¼Œç¨³å¾—ä¸€æ¯”ã€‚</p><h2 id=ä¸€å…ˆæ-tailscaleäº‘ç«¯å†…ç½‘é›†ç¾¤>ä¸€ã€å…ˆæ Tailscaleï¼šäº‘ç«¯å†…ç½‘é›†ç¾¤</h2><h3 id=ä¸ºä»€ä¹ˆä¸ç”¨-wireguard-æ‰‹åŠ¨ç»„ç½‘äº†>ä¸ºä»€ä¹ˆä¸ç”¨ WireGuard æ‰‹åŠ¨ç»„ç½‘äº†ï¼Ÿ</h3><p>2025 å¹´å†™çš„é‚£ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ç”¨çš„æ˜¯ WireGuard åŸç”Ÿæ–¹æ¡ˆ + k3s Flannel <code>wireguard-native</code> æ¨¡å¼ã€‚</p><p>è¯´å®è¯ï¼ŒWireGuard æœ¬èº«å¾ˆç¨³ï¼Œæ€§èƒ½ä¹Ÿå¥½ã€‚ä½†æ‰‹åŠ¨ç®¡ç† Peer è¿™ä»¶äº‹ï¼Œåœ¨èŠ‚ç‚¹å¤šäº†ä¹‹åç®€ç›´æ˜¯å™©æ¢¦ï¼š</p><ul><li>æ¯åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä»–èŠ‚ç‚¹çš„ WireGuard é…ç½®éƒ½è¦æ”¹</li><li>å…¬é’¥äº¤æ¢ã€IP åˆ†é…å…¨é æ‰‹åŠ¨</li><li>æŸå°æœºå™¨æ¢äº†å…¬ç½‘ IPï¼Œæ‰€æœ‰ Peer éƒ½å¾—æ›´æ–°</li><li>æ²¡æœ‰ç»Ÿä¸€çš„ç®¡ç†ç•Œé¢</li></ul><p>æ‰€ä»¥ï¼Œè¿™æ¬¡ç›´æ¥ä¸Š Tailscaleã€‚</p><h3 id=ä¸ºä»€ä¹ˆè‡ªå»º-headscale>ä¸ºä»€ä¹ˆè‡ªå»º Headscaleï¼Ÿ</h3><p>Tailscale å®˜æ–¹çš„ SaaS æœåŠ¡å½“ç„¶å¥½ç”¨ï¼Œä¸ªäººç‰ˆç°åœ¨æ”¯æŒæœ€å¤š 100 å°è®¾å¤‡ï¼Œæ•°é‡ä¸Šå®Œå…¨å¤Ÿç”¨ã€‚ä½†æœ‰å‡ ä¸ªé—®é¢˜ï¼š</p><ol><li><strong>ç™»å½•éœ€è¦å¤–ç½‘</strong>â€”â€”Tailscale çš„ç™»å½•è®¤è¯èµ°çš„æ˜¯ Google/Microsoft/GitHub OAuthï¼Œå›½å†…è£¸è¿åŸºæœ¬æ²¡æˆï¼Œæ¯æ¬¡ <code>tailscale up</code> éƒ½å¾—å…ˆç¿»å¢™æˆæƒï¼ŒæœåŠ¡å™¨ç«¯æ›´æ˜¯éº»çƒ¦</li><li><strong>æ•°æ®æ§åˆ¶</strong>â€”â€”æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯éƒ½åœ¨åˆ«äººé‚£ï¼Œå¿ƒé‡Œä¸è¸å®</li><li><strong>å›½å†…è®¿é—®</strong>â€”â€”Tailscale å®˜æ–¹çš„åè°ƒæœåŠ¡å™¨ï¼ˆcoordination serverï¼‰åœ¨æµ·å¤–ï¼Œå›½å†…èŠ‚ç‚¹è¿æ¥ä¸å¤ªç¨³å®šï¼Œå¶å°”ä¼šå‡ºç°èŠ‚ç‚¹é—´å»ºè¿æ…¢çš„é—®é¢˜</li></ol><p>æ‰€ä»¥æˆ‘é€‰æ‹©äº† <a class=link href=https://github.com/juanfont/headscale target=_blank rel=noopener>Headscale</a>â€”â€”å¼€æºçš„ Tailscale æ§åˆ¶é¢å®ç°ã€‚</p><p>é…åˆ <a class=link href=https://goauthentik.io/ target=_blank rel=noopener>Authentik</a> åš OIDC ç™»å½•ï¼Œä½“éªŒå’Œå®˜æ–¹ Tailscale å‡ ä¹ä¸€è‡´ï¼Œç”šè‡³æ›´çµæ´»ã€‚</p><h3 id=headscale-éƒ¨ç½²>Headscale éƒ¨ç½²</h3><p><strong>æœåŠ¡å™¨è¦æ±‚</strong>ï¼šä¸€å° 2C2G çš„å°æœºå™¨å°±å¤Ÿäº†ï¼Œæˆ‘ç”¨çš„æ˜¯è…¾è®¯äº‘è½»é‡ Ubuntu 24.04ã€‚</p><p>æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ª <code>docker-compose.yml</code>ï¼ŒåŒ…å«ï¼š</p><div class=table-wrapper><table><thead><tr><th>ç»„ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Headscale v0.28.0</td><td>Tailscale æ§åˆ¶é¢</td></tr><tr><td>Authentik 2025.2.4</td><td>OIDC è´¦å·å¯†ç ç™»å½•</td></tr><tr><td>PostgreSQL 16</td><td>Authentik æ•°æ®åº“</td></tr><tr><td>Redis</td><td>Authentik ç¼“å­˜</td></tr><tr><td>Nginx</td><td>HTTPS åå‘ä»£ç†</td></tr></tbody></table></div><p>éƒ¨ç½²å®Œä¹‹åï¼Œä¸¤ä¸ªåŸŸåå°±ä½ï¼š</p><ul><li><code>https://ts.example.com</code> â†’ Headscale æ§åˆ¶é¢</li><li><code>https://auth.example.com</code> â†’ Authentik ç™»å½•ç®¡ç†</li></ul><p>è¯¦ç»†çš„éƒ¨ç½²æµç¨‹è¿™é‡Œä¸å±•å¼€äº†ï¼ˆé‚£æ˜¯å¦ä¸€ç¯‡æ–‡ç« çš„äº‹ï¼‰ï¼Œæ ¸å¿ƒè¦ç‚¹ï¼š</p><ol><li><strong>HTTPS ç”¨ acme.sh + Nginx</strong>ï¼Œåˆ«æ Traefik é‚£äº›èŠ±é‡Œèƒ¡å“¨çš„</li><li><strong>Headscale é…ç½® OIDC</strong>ï¼ŒIssuer æŒ‡å‘ Authentik</li><li><strong>IP æ®µç”¨ <code>100.64.0.0/10</code></strong>ï¼Œè¿™æ˜¯ CGNAT åœ°å€æ®µï¼Œä¸ä¼šå’Œå†…ç½‘å†²çª</li></ol><h3 id=èŠ‚ç‚¹å…¥ç½‘>èŠ‚ç‚¹å…¥ç½‘</h3><p>è£…å¥½ Headscale ä¹‹åï¼Œä»»ä½•ä¸€å°æœºå™¨å…¥ç½‘å°±æ˜¯ä¸€è¡Œå‘½ä»¤çš„äº‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># å®‰è£… Tailscale å®¢æˆ·ç«¯</span>
</span></span><span class=line><span class=cl>curl -fsSL https://tailscale.com/install.sh <span class=p>|</span> sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è¿æ¥åˆ°è‡ªå»ºæ§åˆ¶é¢</span>
</span></span><span class=line><span class=cl>tailscale up --login-server<span class=o>=</span>https://ts.example.com --hostname<span class=o>=</span>ä½ çš„ä¸»æœºå --accept-dns<span class=o>=</span><span class=nb>false</span>
</span></span></code></pre></td></tr></table></div></div><p>ç»ˆç«¯ä¼šåå‡ºä¸€ä¸ªé“¾æ¥ï¼Œæµè§ˆå™¨æ‰“å¼€ï¼Œè·³åˆ° Authentik ç™»å½•é¡µï¼Œè¾“å…¥è´¦å·å¯†ç ï¼Œæˆæƒå®Œæˆâ€”â€”èŠ‚ç‚¹å…¥ç½‘ã€‚</p><p>å°±è¿™ä¹ˆç®€å•ã€‚</p><p><strong>å…³é”®å»ºè®®</strong>ï¼š</p><blockquote><p><strong>ä¸è¦ä¾èµ–å…¬æœ‰äº‘å†…ç½‘ï¼</strong></p><p>å³ä½¿ä½ çš„ Master èŠ‚ç‚¹åœ¨åŒä¸€ä¸ªäº‘ï¼Œä¹Ÿå»ºè®®ç»Ÿä¸€èµ° Tailscale é€šä¿¡ã€‚</p><p>åŸå› å¾ˆç®€å•ï¼šå…¬æœ‰äº‘å†…ç½‘æ˜¯ä¸ªé»‘ç›’ï¼Œå“ªå¤©æ¢ä¸ªæœºå™¨ã€æ¢ä¸ªå¯ç”¨åŒºï¼Œå†…ç½‘ IP å°±å˜äº†ã€‚
è€Œ Tailscale IP æ˜¯ä½ è‡ªå·±åˆ†é…çš„ï¼Œä¸ä¼šå˜ã€‚</p><p>æ‰€æœ‰èŠ‚ç‚¹ï¼Œä¸ç®¡æ˜¯äº‘ç«¯ã€æœ¬åœ°ã€è¿˜æ˜¯å…¶ä»–äº‘å¹³å°ï¼Œç»Ÿä¸€ç”¨ Tailscale æ¥å…¥ï¼Œç½‘ç»œæ¶æ„å¹²å‡€åˆ©è½ã€‚</p></blockquote><p>å½“å‰æˆ‘çš„ Tailscale ç½‘ç»œé•¿è¿™æ ·ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>100.64.0.2   lgb-macbookair-m4   macOS     â† æˆ‘çš„å¼€å‘æœº
</span></span><span class=line><span class=cl>100.64.0.3   haru                linux     â† Edge èŠ‚ç‚¹
</span></span><span class=line><span class=cl>100.64.0.4   lgb-amd-3700        linux     â† æœ¬åœ° Edge èŠ‚ç‚¹
</span></span><span class=line><span class=cl>100.64.0.5   vm-16-12-ubuntu     linux     â† K3s Master
</span></span><span class=line><span class=cl>100.64.0.6   vm-0-8-ubuntu-new   linux     â† K3s Master (Primary)
</span></span><span class=line><span class=cl>100.64.0.7   vm-28-17-ubuntu     linux     â† K3s Master
</span></span><span class=line><span class=cl>100.64.0.8   rainyun-vja2g92e    linux     â† æµ·å¤–èŠ‚ç‚¹
</span></span><span class=line><span class=cl>100.64.0.9   hc1                 linux     â† Edge èŠ‚ç‚¹
</span></span><span class=line><span class=cl>100.64.0.10  ts-headscale        linux     â† Headscale æ§åˆ¶é¢ + K3s Master
</span></span><span class=line><span class=cl>100.64.0.12  ipv6radar           linux     â† æµ·å¤–èŠ‚ç‚¹
</span></span><span class=line><span class=cl>100.64.0.13  localhost           android   â† æ‰‹æœºä¹Ÿèƒ½å…¥ç½‘ï¼ˆæ‘¸é±¼ç”¨ï¼‰
</span></span></code></pre></td></tr></table></div></div><p>ä¸ç®¡åœ¨å“ªï¼Œ<code>ping 100.64.0.6</code> å°±èƒ½é€šã€‚è¿™æ‰æ˜¯æ­£ç¡®çš„å†…ç½‘ä½“éªŒã€‚</p><h2 id=äºŒk3s-é›†ç¾¤æ­å»ºåŸºäº-tailscale-ç½‘ç»œ>äºŒã€K3s é›†ç¾¤æ­å»ºï¼šåŸºäº Tailscale ç½‘ç»œ</h2><h3 id=æ ¸å¿ƒåŸåˆ™>æ ¸å¿ƒåŸåˆ™</h3><ol><li><strong>Master èŠ‚ç‚¹å…¨éƒ¨æ”¾åœ¨äº‘ç«¯åŒä¸€å®¶äº‘</strong>â€”â€”æˆ‘çš„ 4 å° Master éƒ½åœ¨è…¾è®¯äº‘ï¼Œetcd åŒæ­¥å»¶è¿Ÿä½</li><li><strong>Master ä¹‹é—´ä¹Ÿç”¨ Tailscale IP é€šä¿¡</strong>â€”â€”ä¸ä¾èµ–äº‘å†…ç½‘</li><li><strong>Edge èŠ‚ç‚¹éšæ„</strong>â€”â€”å®¶é‡Œçš„å°å¼æœºã€æµ·å¤–çš„ VPSã€å…¬å¸çš„å·¥ä½œç«™ï¼Œåªè¦ Tailscale èƒ½é€šå°±è¡Œ</li><li><strong>ç½‘å…³èŠ‚ç‚¹ç”¨å¤§æµé‡æœºå™¨</strong>â€”â€”Ingress è·‘åœ¨è½»é‡äº‘ä¸Šï¼Œæµé‡å¤Ÿç”¨</li></ol><h3 id=å®‰è£…-master>å®‰è£… Master</h3><p>å®‰è£…å…¶å®æ²¡ä»€ä¹ˆèŠ±æ´»ï¼Œçœ‹å®˜æ–¹æ–‡æ¡£å°±å¥½ï¼š<a class=link href=https://docs.k3s.io/zh/quick-start target=_blank rel=noopener>https://docs.k3s.io/zh/quick-start</a></p><p>ä½†æœ‰å‡ ä¸ª<strong>å…³é”®å‚æ•°</strong>å¿…é¡»æ³¨æ„ã€‚</p><p><strong>ç¬¬ä¸€ä¸ª Masterï¼ˆåˆå§‹åŒ–é›†ç¾¤ï¼‰</strong>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh <span class=p>|</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nv>INSTALL_K3S_MIRROR</span><span class=o>=</span>cn <span class=se>\
</span></span></span><span class=line><span class=cl>  sh -s - server <span class=se>\
</span></span></span><span class=line><span class=cl>  --cluster-init <span class=se>\
</span></span></span><span class=line><span class=cl>  --flannel-iface<span class=o>=</span>tailscale0 <span class=se>\
</span></span></span><span class=line><span class=cl>  --node-ip<span class=o>=</span>100.64.0.6 <span class=se>\
</span></span></span><span class=line><span class=cl>  --tls-san<span class=o>=</span>100.64.0.6
</span></span></code></pre></td></tr></table></div></div><p><strong>åç»­ Master åŠ å…¥é›†ç¾¤</strong>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh <span class=p>|</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nv>INSTALL_K3S_MIRROR</span><span class=o>=</span>cn <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nv>K3S_TOKEN</span><span class=o>=</span><span class=s2>&#34;ä½ çš„Token&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  sh -s - server <span class=se>\
</span></span></span><span class=line><span class=cl>  --server https://100.64.0.6:6443 <span class=se>\
</span></span></span><span class=line><span class=cl>  --flannel-iface<span class=o>=</span>tailscale0 <span class=se>\
</span></span></span><span class=line><span class=cl>  --node-ip<span class=o>=</span><span class=k>$(</span>tailscale ip -4<span class=k>)</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  --tls-san<span class=o>=</span><span class=k>$(</span>tailscale ip -4<span class=k>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ ¸å¿ƒå‚æ•°è¯´æ˜</strong>ï¼š</p><div class=table-wrapper><table><thead><tr><th>å‚æ•°</th><th>ä¸ºä»€ä¹ˆå¿…é¡»</th></tr></thead><tbody><tr><td><code>--cluster-init</code></td><td>ç¬¬ä¸€ä¸ª Master ç”¨ï¼Œå¯ç”¨åµŒå…¥å¼ etcd HA</td></tr><tr><td><code>--flannel-iface=tailscale0</code></td><td><strong>æœ€å…³é”®ï¼</strong> è®© Flannel VXLAN èµ° Tailscale ç½‘å¡ï¼Œä¸æ˜¯ç‰©ç†ç½‘å¡</td></tr><tr><td><code>--node-ip=$(tailscale ip -4)</code></td><td>èŠ‚ç‚¹ IP ç”¨ Tailscale IPï¼Œä¿è¯è·¨äº‘é€šä¿¡</td></tr><tr><td><code>--tls-san=&lt;ip></code></td><td>API Server è¯ä¹¦åŒ…å« Tailscale IP</td></tr><tr><td><code>INSTALL_K3S_MIRROR=cn</code></td><td>å›½å†…é•œåƒåŠ é€Ÿï¼Œæµ·å¤–èŠ‚ç‚¹ä¸éœ€è¦</td></tr></tbody></table></div><p><code>--flannel-iface=tailscale0</code> è¿™ä¸ªå‚æ•°æ˜¯è¸©äº†æ— æ•°å‘ä¹‹åçš„è¡€æ³ªæ•™è®­ã€‚</p><p>å¦‚æœä¸åŠ è¿™ä¸ªå‚æ•°ï¼ŒFlannel ä¼šé»˜è®¤ç”¨ç‰©ç†ç½‘å¡çš„ IPï¼ˆæ¯”å¦‚å…¬ç½‘ IP æˆ–è€…äº‘å†…ç½‘ IPï¼‰æ¥å»º VXLAN éš§é“ã€‚ç»“æœå°±æ˜¯â€”â€”<strong>åŒäº‘çš„èŠ‚ç‚¹èƒ½é€šï¼Œè·¨äº‘çš„èŠ‚ç‚¹ Pod å…¨éƒ¨ä¸é€š</strong>ã€‚</p><p>åŠ äº†è¿™ä¸ªå‚æ•°ä¹‹åï¼ŒFlannel çš„ VXLAN éš§é“å…¨éƒ¨èµ° Tailscale è™šæ‹Ÿç½‘å¡ï¼Œè·¨äº‘ Pod é€šä¿¡å®Œç¾ã€‚</p><h3 id=å®‰è£…-edge-èŠ‚ç‚¹>å®‰è£… Edge èŠ‚ç‚¹</h3><p>Edge èŠ‚ç‚¹å°±æ˜¯ Agentï¼Œæ›´ç®€å•ã€‚</p><p><strong>å›½å†…èŠ‚ç‚¹</strong>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh <span class=p>|</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nv>K3S_URL</span><span class=o>=</span><span class=s2>&#34;https://100.64.0.6:6443&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nv>K3S_TOKEN</span><span class=o>=</span><span class=s2>&#34;ä½ çš„Token&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nv>INSTALL_K3S_MIRROR</span><span class=o>=</span>cn <span class=se>\
</span></span></span><span class=line><span class=cl>  sh -s - agent <span class=se>\
</span></span></span><span class=line><span class=cl>  --node-ip<span class=o>=</span><span class=k>$(</span>tailscale ip -4<span class=k>)</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  --flannel-iface<span class=o>=</span>tailscale0 <span class=se>\
</span></span></span><span class=line><span class=cl>  --node-label<span class=o>=</span><span class=s2>&#34;node.kubernetes.io/role=edge&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æµ·å¤–èŠ‚ç‚¹</strong>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sfL https://get.k3s.io <span class=p>|</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nv>K3S_URL</span><span class=o>=</span><span class=s2>&#34;https://100.64.0.6:6443&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nv>K3S_TOKEN</span><span class=o>=</span><span class=s2>&#34;ä½ çš„Token&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  sh -s - agent <span class=se>\
</span></span></span><span class=line><span class=cl>  --node-ip<span class=o>=</span><span class=k>$(</span>tailscale ip -4<span class=k>)</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  --flannel-iface<span class=o>=</span>tailscale0 <span class=se>\
</span></span></span><span class=line><span class=cl>  --node-label<span class=o>=</span><span class=s2>&#34;node.kubernetes.io/role=edge&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>å·®åˆ«å°±æ˜¯å›½å†…ç”¨ <code>rancher-mirror.rancher.cn</code>ï¼Œæµ·å¤–ç”¨å®˜æ–¹ <code>get.k3s.io</code>ã€‚</p><h3 id=å›½å†…-docker-é•œåƒæ‹‰å–é—®é¢˜>å›½å†… Docker é•œåƒæ‹‰å–é—®é¢˜</h3><p>è¿™é‡Œè¦ç‰¹åˆ«æä¸€ä¸‹ï¼š<strong>å›½å†…ç¯å¢ƒä¸‹ Docker / containerd æ‹‰å–é•œåƒæ˜¯ä¸ªå¤§éº»çƒ¦ã€‚</strong></p><p>Docker Hubã€ghcr.ioã€gcr.io è¿™äº›é•œåƒæºåœ¨å›½å†…åŸºæœ¬å¤„äºåŠå¢™çŠ¶æ€ï¼Œk3s å†…ç½®çš„ä¸€äº›ç³»ç»Ÿç»„ä»¶é•œåƒï¼ˆæ¯”å¦‚ <code>pause</code>ã€<code>coredns</code>ã€<code>metrics-server</code>ï¼‰å¯èƒ½æ‹‰ä¸ä¸‹æ¥ï¼Œå¯¼è‡´èŠ‚ç‚¹ä¸€ç›´ NotReadyã€‚</p><p>å‡ ä¸ªè§£å†³æ€è·¯ï¼š</p><ol><li><strong>é…ç½®é•œåƒåŠ é€Ÿå™¨</strong>â€”â€”åœ¨ <code>/etc/rancher/k3s/registries.yaml</code> ä¸­é…ç½®å›½å†…å¯ç”¨çš„ mirrorï¼ˆå¦‚æœä½ è¿˜èƒ½æ‰¾åˆ°æ´»ç€çš„ï¼‰</li><li><strong>æœ¬åœ°å¯¼å‡ºå†å¯¼å…¥ï¼ˆæ¨èï¼‰</strong>â€”â€”åœ¨æµ·å¤–èŠ‚ç‚¹æˆ–è€…èƒ½æ­£å¸¸æ‹‰å–çš„æœºå™¨ä¸Šå…ˆæŠŠé•œåƒæ‹‰ä¸‹æ¥ï¼Œå¯¼å‡ºåä¼ åˆ°å›½å†…èŠ‚ç‚¹å¯¼å…¥ï¼š<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åœ¨æµ·å¤–èŠ‚ç‚¹å¯¼å‡º</span>
</span></span><span class=line><span class=cl>ctr -n k8s.io images <span class=nb>export</span> pause.tar registry.k8s.io/pause:3.9
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¼ åˆ°å›½å†…èŠ‚ç‚¹</span>
</span></span><span class=line><span class=cl>scp pause.tar root@&lt;å›½å†…èŠ‚ç‚¹IP&gt;:/tmp/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åœ¨å›½å†…èŠ‚ç‚¹å¯¼å…¥</span>
</span></span><span class=line><span class=cl>ctr -n k8s.io images import /tmp/pause.tar
</span></span></code></pre></td></tr></table></div></div></li><li><strong>è‡ªå»º Harbor é•œåƒä»“åº“</strong>â€”â€”å¦‚æœèŠ‚ç‚¹å¤šï¼Œå»ºè®®æä¸€ä¸ªç§æœ‰é•œåƒä»“åº“åš proxy cacheï¼Œä¸€åŠ³æ°¸é€¸</li></ol><p>æˆ‘çš„åšæ³•æ˜¯åœ¨æµ·å¤–èŠ‚ç‚¹ä¸Šæå‰æ‹‰å¥½éœ€è¦çš„é•œåƒï¼Œç„¶å <code>ctr images export</code> å¯¼å‡ºï¼Œé€šè¿‡ Tailscale å†…ç½‘ä¼ åˆ°å›½å†…èŠ‚ç‚¹å† <code>ctr images import</code> å¯¼å…¥ã€‚è™½ç„¶ç¬¨äº†ç‚¹ï¼Œä½†èƒœåœ¨ç¨³å®šå¯é ã€‚</p><p>Token åœ¨ç¬¬ä¸€ä¸ª Master ä¸Šè·å–ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /var/lib/rancher/k3s/server/node-token
</span></span></code></pre></td></tr></table></div></div><p>æ²¡ä»€ä¹ˆé—®é¢˜çš„è¯ï¼Œå‡ ç§’é’Ÿåå°±èƒ½çœ‹åˆ°æ–°èŠ‚ç‚¹ä¸Šçº¿ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl get nodes -o wide
</span></span><span class=line><span class=cl>NAME                 STATUS   ROLES                       AGE    VERSION
</span></span><span class=line><span class=cl>vm-0-8-ubuntu-new    Ready    control-plane,etcd,master   30d    v1.34.3+k3s3
</span></span><span class=line><span class=cl>vm-16-12-ubuntu      Ready    control-plane,etcd,master   30d    v1.34.3+k3s3
</span></span><span class=line><span class=cl>vm-28-17-ubuntu      Ready    control-plane,etcd,master   30d    v1.34.3+k3s3
</span></span><span class=line><span class=cl>vm-0-15-ubuntu       Ready    control-plane,etcd,master   1d     v1.34.3+k3s3
</span></span><span class=line><span class=cl>haru                 Ready    &lt;none&gt;                      20d    v1.34.3+k3s3
</span></span><span class=line><span class=cl>lgb-amd-3700         Ready    &lt;none&gt;                      15d    v1.34.3+k3s3
</span></span><span class=line><span class=cl>rainyun-ssh7pavp     Ready    &lt;none&gt;                      10d    v1.34.3+k3s3
</span></span><span class=line><span class=cl>hc1                  Ready    &lt;none&gt;                      5d     v1.34.3+k3s3
</span></span></code></pre></td></tr></table></div></div><p>8 ä¸ªèŠ‚ç‚¹å…¨éƒ¨ Readyã€‚</p><p>ç¾ã€‚</p><h3 id=å…³äºç½‘å…³èŠ‚ç‚¹>å…³äºç½‘å…³èŠ‚ç‚¹</h3><p>Ingress æµé‡å…¥å£éœ€è¦å…¬ç½‘ IP + è¶³å¤Ÿçš„å¸¦å®½ã€‚</p><p>æˆ‘çš„åšæ³•æ˜¯ï¼š</p><ul><li><strong>ç½‘å…³èŠ‚ç‚¹ç”¨è½»é‡äº‘æœåŠ¡å™¨</strong>â€”â€”è…¾è®¯äº‘è½»é‡ã€é˜¿é‡Œäº‘è½»é‡ä¹‹ç±»çš„ï¼Œæœˆä»˜å‡ åå—ï¼Œæµé‡åŒ…å¤Ÿç”¨</li><li><strong>k3s è‡ªå¸¦çš„ Traefik Ingress</strong> é»˜è®¤ä¼šè·‘åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šï¼ˆDaemonSetï¼‰ï¼Œä½†å®é™…å¯¹å¤–æš´éœ²çš„åªéœ€è¦ä¸€ä¸¤ä¸ªèŠ‚ç‚¹</li><li><strong>åŸŸå DNS è§£æåˆ°è¿™äº›è½»é‡äº‘çš„å…¬ç½‘ IP</strong> å°±è¡Œ</li></ul><p>æµé‡è·¯å¾„ï¼š<code>ç”¨æˆ·è¯·æ±‚ â†’ è½»é‡äº‘å…¬ç½‘IP â†’ Traefik Ingress â†’ Service â†’ Podï¼ˆå¯èƒ½åœ¨ä»»æ„èŠ‚ç‚¹ä¸Šï¼‰</code></p><p>Pod åœ¨æµ·å¤–èŠ‚ç‚¹ä¸Šä¹Ÿæ²¡å…³ç³»ï¼ŒFlannel over Tailscale ä¼šæŠŠæµé‡æ‰“é€šã€‚</p><h2 id=ä¸‰è¸©å‘å®å½•>ä¸‰ã€è¸©å‘å®å½•</h2><h3 id=å‘-1flannel-ç”¨é”™ç½‘å¡è¡€æ³ªæ•™è®­>å‘ 1ï¼šFlannel ç”¨é”™ç½‘å¡ï¼ˆè¡€æ³ªæ•™è®­ï¼‰</h3><p><strong>ç—‡çŠ¶</strong>ï¼šEdge èŠ‚ç‚¹ Ready äº†ï¼Œä½†è·¨èŠ‚ç‚¹ Pod é€šä¿¡å…¨æŒ‚ã€‚</p><p><strong>åŸå› </strong>ï¼šæ²¡åŠ  <code>--flannel-iface=tailscale0</code>ï¼ŒFlannel é»˜è®¤é€‰äº†å…¬ç½‘ç½‘å¡ã€‚</p><p><strong>è¯Šæ–­</strong>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe node rainyun-ssh7pavp <span class=p>|</span> grep flannel
</span></span><span class=line><span class=cl><span class=c1># çœ‹åˆ° flannel.alpha.coreos.com/public-ip ç”¨çš„æ˜¯å…¬ç½‘ IP è€Œä¸æ˜¯ 100.64.0.x</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>è§£å†³</strong>ï¼šå¸è½½ k3s agentï¼Œé‡è£…æ—¶åŠ ä¸Š <code>--flannel-iface=tailscale0</code>ã€‚</p><p>è¿™ä¸ªå‚æ•°çœŸçš„å¤ªé‡è¦äº†ï¼Œè¯´ä¸‰éï¼š</p><ol><li><code>--flannel-iface=tailscale0</code></li><li><code>--flannel-iface=tailscale0</code></li><li><code>--flannel-iface=tailscale0</code></li></ol><h3 id=å‘-2tailscale-è¿æ¥ä¸ç¨³å®š>å‘ 2ï¼šTailscale è¿æ¥ä¸ç¨³å®š</h3><p>æŸå° Vultr çš„ VPSï¼ŒTailscale è¿æ¥ä¸‰å¤©ä¸¤å¤´æ–­ã€‚</p><p>èŠ‚ç‚¹åœ¨ Ready å’Œ NotReady ä¹‹é—´åå¤æ¨ªè·³ï¼Œkubelet ç–¯ç‹‚æŠ¥ <code>unable to update node status</code>ã€‚</p><p>æ’æŸ¥ä¸‹æ¥å‘ç°æ˜¯ VPN é“¾è·¯é—®é¢˜ï¼Œè·Ÿ K3s æ²¡å…³ç³»ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå…ˆç”¨ taint éš”ç¦»ï¼Œåé¢ç›´æ¥æ¢æ‰äº†è¿™å°æœºå™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl taint nodes vultr.guest node-problem<span class=o>=</span>true:NoSchedule --overwrite
</span></span><span class=line><span class=cl>kubectl taint nodes vultr.guest node-problem<span class=o>=</span>true:NoExecute --overwrite
</span></span></code></pre></td></tr></table></div></div><p>æ•™è®­ï¼š<strong>ä¸ç¨³å®šçš„èŠ‚ç‚¹å®å¯ä¸è¦ï¼Œåˆ«æ­»ç£•ã€‚</strong> æ¢ä¸€å°æ–°æœºå™¨æ¯”æ’æŸ¥ç½‘ç»œé—®é¢˜å¿«å¾—å¤šã€‚</p><h3 id=å‘-3ä½é…-master-åˆ«è·‘ä¸šåŠ¡-pod>å‘ 3ï¼šä½é… Master åˆ«è·‘ä¸šåŠ¡ Pod</h3><p>æˆ‘çš„ç¬¬å››å° Masterï¼ˆvm-0-15-ubuntuï¼‰åªæœ‰ 2G å†…å­˜ï¼ŒåŒæ—¶è¿˜è·‘ç€ Headscale æ§åˆ¶é¢ã€‚</p><p>å¦‚æœè®©å®ƒè·‘ä¸šåŠ¡ Podï¼Œåˆ†åˆ†é’Ÿ OOMã€‚</p><p><strong>è§£å†³</strong>ï¼šåŠ  NoSchedule taintï¼Œåªè·‘æ§åˆ¶å¹³é¢ç»„ä»¶ + etcdã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl taint nodes vm-0-15-ubuntu node-role.kubernetes.io/control-plane<span class=o>=</span>:NoSchedule
</span></span></code></pre></td></tr></table></div></div><p>2G å†…å­˜è·‘ k3s control-plane + etcd + Headscale å…¨å®¶æ¡¶ï¼ŒCPU å’Œå†…å­˜å ç”¨å¤§çº¦ 60%ï¼Œç¨³å¾—ä½ã€‚</p><h2 id=å››æ•…éšœæ’æŸ¥é€ŸæŸ¥>å››ã€æ•…éšœæ’æŸ¥é€ŸæŸ¥</h2><p>èŠ‚ç‚¹åŠ å®Œä¹‹åå‡ºé—®é¢˜ï¼ŸæŒ‰è¿™ä¸ªé¡ºåºæŸ¥ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. çœ‹èŠ‚ç‚¹çŠ¶æ€</span>
</span></span><span class=line><span class=cl>kubectl get nodes -o wide
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. çœ‹èŠ‚ç‚¹äº‹ä»¶</span>
</span></span><span class=line><span class=cl>kubectl describe node &lt;èŠ‚ç‚¹å&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. çœ‹ Tailscale è¿é€šæ€§</span>
</span></span><span class=line><span class=cl>tailscale ping &lt;ç›®æ ‡èŠ‚ç‚¹Tailscale IP&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. çœ‹ Flannel é…ç½®å¯¹ä¸å¯¹</span>
</span></span><span class=line><span class=cl>kubectl describe node &lt;èŠ‚ç‚¹å&gt; <span class=p>|</span> grep flannel
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. çœ‹ kubelet æ—¥å¿—</span>
</span></span><span class=line><span class=cl>ssh root@&lt;èŠ‚ç‚¹IP&gt; <span class=s2>&#34;journalctl -u k3s-agent -n 50&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 6. æµ‹è¯•è·¨èŠ‚ç‚¹ Pod é€šä¿¡</span>
</span></span><span class=line><span class=cl>kubectl run <span class=nb>test</span> --image<span class=o>=</span>busybox --rm -it -- wget -qO- http://&lt;å…¶ä»–èŠ‚ç‚¹PodIP&gt;
</span></span></code></pre></td></tr></table></div></div><p>90% çš„é—®é¢˜éƒ½æ˜¯å‰ 4 æ­¥èƒ½æŸ¥å‡ºæ¥çš„ã€‚</p><h2 id=äº”æ€»ç»“>äº”ã€æ€»ç»“</h2><p>å¯¹æ¯” 2025 å¹´çš„æ–¹æ¡ˆï¼Œè¿™æ¬¡å‡çº§çš„æ ¸å¿ƒå˜åŒ–ï¼š</p><div class=table-wrapper><table><thead><tr><th>é¡¹ç›®</th><th>2025 å¹´</th><th>2026 å¹´</th></tr></thead><tbody><tr><td>ç»„ç½‘æ–¹æ¡ˆ</td><td>WireGuard æ‰‹åŠ¨é…ç½®</td><td>Tailscale (Headscale è‡ªå»º)</td></tr><tr><td>æ§åˆ¶é¢</td><td>å®˜æ–¹ Tailscale / æ‰‹åŠ¨ WG</td><td>è‡ªå»º Headscale + OIDC</td></tr><tr><td>Master æ•°é‡</td><td>2</td><td>4 (HA)</td></tr><tr><td>Edge èŠ‚ç‚¹</td><td>0</td><td>4</td></tr><tr><td>æ€»èŠ‚ç‚¹æ•°</td><td>2</td><td>8</td></tr><tr><td>æ–°èŠ‚ç‚¹æ¥å…¥</td><td>æ”¹ä¸€å †é…ç½®</td><td>ä¸€è¡Œå‘½ä»¤</td></tr><tr><td>è·¨äº‘é€šä¿¡</td><td>Flannel wireguard-native</td><td>Flannel VXLAN over Tailscale</td></tr><tr><td>ç®¡ç†å¤æ‚åº¦</td><td>é«˜</td><td>ä½</td></tr></tbody></table></div><p><strong>ä¸€å¥è¯æ€»ç»“æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><strong>ç”¨ Tailscaleï¼ˆHeadscale è‡ªå»ºï¼‰åšåº•å±‚ç½‘ç»œ</strong>â€”â€”æ‰€æœ‰èŠ‚ç‚¹ç»Ÿä¸€æ¥å…¥ï¼Œä¸ä¾èµ–ä»»ä½•å…¬æœ‰äº‘å†…ç½‘</li><li><strong>K3s Master æ”¾åœ¨åŒä¸€å®¶äº‘çš„åŒä¸€åœ°åŸŸ</strong>â€”â€”etcd å»¶è¿Ÿä½ï¼Œæ§åˆ¶å¹³é¢ç¨³å®š</li><li><strong>Edge èŠ‚ç‚¹éšä¾¿åŠ </strong>â€”â€”å®¶é‡Œçš„æœºå™¨ã€æµ·å¤–çš„ VPSã€åŠå…¬å®¤çš„å·¥ä½œç«™ï¼Œåªè¦ Tailscale èƒ½é€šå°±è¡Œ</li><li><strong>ç½‘å…³èŠ‚ç‚¹ç”¨è½»é‡äº‘</strong>â€”â€”ä¾¿å®œã€å¸¦å®½å¤Ÿã€å…¬ç½‘ IP å›ºå®š</li></ol><p>æ•´ä¸ªé›†ç¾¤è·‘äº†ä¸€ä¸ªæœˆï¼Œç¨³å¦‚è€ç‹—ã€‚</p><p>8/8 èŠ‚ç‚¹å…¨éƒ¨å¯ç”¨ï¼ˆä¹‹å‰æœ‰ 1 å° Vultr ç½‘ç»œä¸è¡Œï¼Œå·²ç»æ¢æ‰äº†ï¼‰ã€‚</p><p>å®Œäº‹ã€‚</p><p>å…¨æ–‡åœ¨å‡Œæ™¨çš„ä¹¦æˆ¿é‡Œå®Œæˆï¼Œç¥å¤§å®¶æ–°å¹´å¿«ä¹~</p><p>æ‰‹åŠ¨ç‹—å¤´~</p><hr><p><em>ç›¸å…³é“¾æ¥ï¼š</em></p><ul><li><em>K3s å®˜æ–¹æ–‡æ¡£ï¼š<a class=link href=https://docs.k3s.io/zh/ target=_blank rel=noopener>https://docs.k3s.io/zh/</a></em></li><li><em>Headscaleï¼š<a class=link href=https://github.com/juanfont/headscale target=_blank rel=noopener>https://github.com/juanfont/headscale</a></em></li><li><em>Authentikï¼š<a class=link href=https://goauthentik.io/ target=_blank rel=noopener>https://goauthentik.io/</a></em></li><li><em>ä¸Šä¸€ç¯‡ï¼š<a class=link href=https://liguobao.github.io/p/k3s-edge-computing-cluster/ target=_blank rel=noopener>ã€k3sã€‘å¹´åº¦æœ€ä½³è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ–¹æ¡ˆ</a></em></li></ul><hr><p><em>æœ¬æ–‡ä½¿ç”¨ AI è¾…åŠ©å†™ä½œã€‚</em></p></section><footer class=article-footer><section class=article-tags><a href=/zh/tags/k3s/>K3s</a>
<a href=/zh/tags/tailscale/>Tailscale</a>
<a href=/zh/tags/kubernetes/>Kubernetes</a>
<a href=/zh/tags/2026/>2026</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/zh/p/vibe-coding-deploy-tailscale/><div class=article-image><img src=/zh/p/vibe-coding-deploy-tailscale/logo.10bf2686f0c9b97299c4d0132f81bb64_hu_a7ff9109abcc5753.png width=250 height=150 loading=lazy alt="Featured image of post è°ä¸æƒ³è¦è‡ªå·±çš„Tailscaleå†…ç½‘å‘¢~" data-key=vibe-coding-deploy-tailscale data-hash="md5-EL8mhvDJuXKZxNATL4G7ZA=="></div><div class=article-details><h2 class=article-title>è°ä¸æƒ³è¦è‡ªå·±çš„Tailscaleå†…ç½‘å‘¢~</h2></div></a></article><article class=has-image><a href=/zh/p/unitree-g1-develop-on-raspberry-pi/><div class=article-image><img src=/zh/p/unitree-g1-develop-on-raspberry-pi/logo.764fd995f255db159e0fd3c98a914fb3_hu_6a7c739f48c7a5dd.png width=250 height=150 loading=lazy alt="Featured image of post å®‡æ ‘æœºå™¨äººG1ä¾¿æºå¼€å‘æŒ‡åŒ—ï¼šåŸºäºæ ‘è“æ´¾çš„ç¯å¢ƒæ­å»º" data-key=unitree-g1-develop-on-raspberry-pi data-hash="md5-dk/ZlfJV2xWeD9PJipFPsw=="></div><div class=article-details><h2 class=article-title>å®‡æ ‘æœºå™¨äººG1ä¾¿æºå¼€å‘æŒ‡åŒ—ï¼šåŸºäºæ ‘è“æ´¾çš„ç¯å¢ƒæ­å»º</h2></div></a></article><article><a href=/zh/p/gitlab-migration-low-version/><div class=article-details><h2 class=article-title>Gitlab ä½ç‰ˆæœ¬è¿ç§»ç®€æ˜“æ•™ç¨‹</h2></div></a></article><article><a href=/zh/p/linux-du/><div class=article-details><h2 class=article-title>Linux du å‘½ä»¤</h2></div></a></article><article class=has-image><a href=/zh/p/ubuntu-wifi-loss/><div class=article-image><img src=/zh/p/ubuntu-wifi-loss/xiaohei.affc1140e57282b122228f5d5d455d2f_hu_b0100a163c136d87.png width=250 height=150 loading=lazy alt="Featured image of post Ubuntu æœ‰çº¿ç½‘å¡æ‰çº¿é‡å¯å¤‡å¿˜" data-key=ubuntu-wifi-loss data-hash="md5-r/wRQOVygrEiIo9dXUVdLw=="></div><div class=article-details><h2 class=article-title>Ubuntu æœ‰çº¿ç½‘å¡æ‰çº¿é‡å¯å¤‡å¿˜</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=liguobao/liguobao.github.io issue-term=title crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2026 äººç”Ÿåˆ é™¤æŒ‡å—</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>