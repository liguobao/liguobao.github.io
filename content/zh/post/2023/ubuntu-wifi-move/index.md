---
layout: post
title: Ubuntu 有线网卡掉线重启备忘
slug: ubuntu-wifi-loss
categories: 
  - linux
date: 2023-09-22
image: xiaohei.png
tags:
  - Ubuntu
  - Linux
  - docker
---

## 奇怪的故障

家里的台式机上有两个网卡，

主板自带有线网卡，PCIE 上插了一个无线网卡。

上次搞 李国宝：Tesla P40 显卡 2023 年 9 月跳坑指南

这玩意的时候，拆装过主板和机箱，

系统重新开始之后就有线网卡就掉线了。

很是奇怪。

再早一些时间也遇到过类似的问题，

每次都是把手动把之前的 Ubuntu 的 WLAN 有线网卡删掉之后，

重新添加回来，然后就正常工作了。

但是现在...

遇到了问题。

我手上没有显示器了。

（PS：之前的借给朋友用了）

倒是客厅有电视机，但....

网线拉不过去。很是尴尬。

于是，无线网凑合用了好一阵子了。

迷。

说好的计算机世界没有玄学。

道理上。

只需要重置这个网卡就完事了。

在 ifconfig 里面，正常的网卡配置长这样。

无线网卡

一般的虚拟网络长这样。

不正常的网卡。

PS：没有 inet 字段，因为系统识别异常。

ifconfig down & up
禁用之后再启用网卡是使用 ifconfig 命令的。

但是在这里无效。

参考：Linux 中国：Linux 中如何启用和禁用网卡？

还有别的办法吗？

Linux 中国：Linux 中如何启用和禁用网卡？

在上面这个文章写过有 nmtui 工具。

nmtui

nmtui 是一个与 NetworkManager 交互的、基于 curses 图形库的终端 UI 应用。

在启用 nmtui 的时候，如果第一个参数没有特别指定，它会引导用户选择对应的操作去执行。

执行以下命令打开 mntui 界面。选择 “Active a connection” 然后点击 “OK”。

PS： 这里都是正常的配置了。

异常配置的情况下，Device 显示的是一个无效的网卡 id

选中网卡，选择 delete。

然后重新 Add 一个新的网络。

填入我们在 ifconfig 看到的网卡 Id。

选择 ok。

完事。

回顾问题

到这里突然想明白了。

这个玩意是因为，硬件变更系统重新初始化之后，

给主板网卡分配了一个新的设备 Id，

然后系统网络配置使用的还是旧的设备 Id，

于是....

网络没办法正常工作了。

重置网卡设备对它是无效的。

只能重新初始化网络配置。

So...

如上。
